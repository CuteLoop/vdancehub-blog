<!-- Hero: portrait = stacked & centered; landscape = 2/3 hero + 1/3 sidebar -->
<section class="mb-12">
  <style>
    /* ---------- Shared portrait rules (phones) ---------- */
    /* Portrait = width < height (more reliable than small breakpoints) */
    @media (max-aspect-ratio: 1/1) {
      /* Make text comfortably readable site-wide when in portrait */
      html { font-size: 18px; }               /* bumps all rem-based sizes */
      body { line-height: 1.65; }

      /* Use the same outer width & margins for all stacked blocks */
      .stacked-wrap,
      .stacked-card { width: min(44rem, 92vw); margin-inline: auto; }

      /* Show FAQ below hero; hide desktop sidebar */
      .portrait-only  { display: block; }
      .desktop-sidebar { display: none; }
    }

    /* ---------- Landscape (wide) keeps your 2/3 + 1/3 ---------- */
    @media (min-aspect-ratio: 1/1) {
      .hero-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem; align-items: start; }
      .stacked-card, .stacked-wrap { width: auto; margin-inline: 0; }
      .portrait-only { display: none; }
      .desktop-sidebar { display: block; }
    }

    /* Base grid for when no landscape rule applies yet (older UAs) */
    .hero-grid { display: grid; gap: 1.5rem; align-items: start; }
  </style>

  <div class="hero-grid stacked-wrap">
    <!-- HERO CARD (clickable) -->
    <article class="stacked-card relative group bg-zinc-100 rounded-3xl overflow-hidden">
      <!-- Full-card clickable overlay -->
      <a class="absolute inset-0 z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-blue-500 rounded-3xl"
         href="{{ .RelPermalink }}"
         aria-label="{{ printf "Open featured post: %s" .Title }}"></a>

      <!-- Inset image uses SAME horizontal padding as content -->
      <div class="px-6 lg:px-8 mt-4">
        <figure class="aspect-[16/9] rounded-2xl overflow-hidden">
          <img
            src="{{ with .Params.image }}{{ . | relURL }}{{ else }}/images/default.jpg{{ end }}"
            alt="{{ with .Params.caption }}{{ . }}{{ else }}{{ .Title }}{{ end }}"
            width="1200" height="675"
            class="w-full h-full object-cover transition-transform duration-700 lg:group-hover:scale-105"
            loading="lazy" decoding="async" />
        </figure>
      </div>

      <div class="px-6 lg:px-8 pb-8 pt-4 relative z-10">
        <time class="opacity-70" datetime="{{ .Date }}">{{ .Date.Format "Jan 2, 2006" }}</time>
        <h2 class="my-3 text-3xl lg:text-4xl font-bold">{{ .Title }}</h2>
        <p class="text-zinc-600">
          {{ with .Params.description }}{{ . }}{{ else }}{{ .Summary | plainify }}{{ end }}
        </p>
        <div class="mt-5">
          <span class="inline-flex items-center border rounded-full px-5 py-2 lg:group-hover:bg-blue-100">
            Read more →
          </span>
        </div>
      </div>
    </article>

    <!-- LANDSCAPE SIDEBAR (only shown in landscape) -->
    <aside class="desktop-sidebar">
      {{ if templates.Exists "_partials/content/aside.html" }}
        {{ partial "content/aside" . }}
      {{ else }}
        <div class="bg-zinc-100 rounded-3xl p-6">
          <h3 class="text-xl font-semibold mb-4">Reserve your seat</h3>
          <div class="space-y-3">
            <a href="/signup?course=beginner" class="w-full inline-flex justify-center items-center rounded-full border px-5 py-2 hover:bg-blue-100">Beginner Course</a>
            <a href="/signup?course=intermediate" class="w-full inline-flex justify-center items-center rounded-full border px-5 py-2 hover:bg-blue-100">Intermediate Course</a>
            <a href="/signup?event=cumbia-party" class="w-full inline-flex justify-center items-center rounded-full border px-5 py-2 hover:bg-blue-100">Cumbia Party</a>
          </div>
          <div class="mt-6">
            <h4 class="font-semibold mb-2">FAQ</h4>
            <div class="divide-y divide-zinc-200">
              <details class="py-3"><summary class="font-medium cursor-pointer">Do I need a partner?</summary><p class="mt-2 text-sm text-zinc-600">No partner needed; rotating optional.</p></details>
              <details class="py-3"><summary class="font-medium cursor-pointer">What should I bring?</summary><p class="mt-2 text-sm text-zinc-600">Comfy shoes and water.</p></details>
              <details class="py-3"><summary class="font-medium cursor-pointer">Can I drop in?</summary><p class="mt-2 text-sm text-zinc-600">Yes—drop-ins welcome.</p></details>
            </div>
          </div>
        </div>
      {{ end }}
    </aside>

    <!-- PORTRAIT FAQ (same width & margins as hero; hidden in landscape) -->
    <aside class="portrait-only stacked-card bg-zinc-100 rounded-3xl overflow-hidden">
      <div class="px-6 lg:px-8 py-6">
        <h3 class="text-xl font-semibold mb-4 text-center">Reserve your seat</h3>
        <div class="space-y-3">
          <a href="/signup?course=beginner" class="w-full inline-flex justify-center items-center rounded-full border px-5 py-2 hover:bg-blue-100">Beginner Course</a>
          <a href="/signup?course=intermediate" class="w-full inline-flex justify-center items-center rounded-full border px-5 py-2 hover:bg-blue-100">Intermediate Course</a>
          <a href="/signup?event=cumbia-party" class="w-full inline-flex justify-center items-center rounded-full border px-5 py-2 hover:bg-blue-100">Cumbia Party</a>
        </div>
        <div class="mt-6">
          <h4 class="font-semibold mb-2 text-center">FAQ</h4>
          <div class="divide-y divide-zinc-200">
            <details class="py-3"><summary class="font-medium cursor-pointer">Do I need a partner?</summary><p class="mt-2 text-sm text-zinc-600">No partner needed; rotating optional.</p></details>
            <details class="py-3"><summary class="font-medium cursor-pointer">What should I bring?</summary><p class="mt-2 text-sm text-zinc-600">Comfy shoes and water.</p></details>
            <details class="py-3"><summary class="font-medium cursor-pointer">Can I drop in?</summary><p class="mt-2 text-sm text-zinc-600">Yes—drop-ins welcome.</p></details>
          </div>
        </div>
      </div>
    </aside>

  </div>
</section>
